<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Корзина</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/static/img/favicon.ico">

    <!-- CSS 
    ========================= -->
    <!--bootstrap min css-->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <!--owl carousel min css-->
    <link rel="stylesheet" href="/static/css/owl.carousel.min.css">
    <!--slick min css-->
    <link rel="stylesheet" href="/static/css/slick.css">
    <!--magnific popup min css-->
    <link rel="stylesheet" href="/static/css/magnific-popup.css">
    <!--font awesome css-->
    <link rel="stylesheet" href="/static/css/font.awesome.css">
    <!--animate css-->
    <link rel="stylesheet" href="/static/css/animate.css">
    <!--jquery ui min css-->
    <link rel="stylesheet" href="/static/css/jquery-ui.min.css">
    <!--slinky menu css-->
    <link rel="stylesheet" href="/static/css/slinky.menu.css">
    <!--plugins css-->
    <link rel="stylesheet" href="/static/css/plugins.css">

    <!-- Main Style CSS -->
    <link rel="stylesheet" href="/static/css/style.css">

    <!--modernizr min js here-->
    <script src="/static/js/vendor/modernizr-3.7.1.min.js"></script>

</head>

<body>


<!--header area start-->

<!--offcanvas menu area start-->
<div class="off_canvars_overlay">

</div>
<div class="offcanvas_menu">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="canvas_open">
                    <a href="javascript:void(0)"><i class="icon-menu"></i></a>
                </div>
                <div class="offcanvas_menu_wrapper">
                    <div class="canvas_close">
                        <a href="javascript:void(0)"><i class="icon-x"></i></a>
                    </div>
                    <div class="search_container">
                        <form id="search-form1">
                            <div class="hover_category">
                                <select class="select_option" name="select" id="search-category1">
                                    <option selected value="0">Все категории</option>
                                    <option th:each="category:${categories}" th:value="${category.id}"
                                            th:text="${category.name}"></option>
                                </select>
                            </div>
                            <div class="search_box">
                                <input placeholder="Поиск товара..." type="text" id="search-text1"
                                       th:value="${query}">
                                <button type="submit" id="search-button1"><i class="icon-search"></i></button>
                            </div>
                        </form>
                    </div>
                    <div class="call-support">
                        <p>Тех. поддержка: <a></a></p>
                    </div>
                    <div id="menu" class="text-left ">
                        <ul class="offcanvas_main_menu">
                            <li class="menu-item-has-children">
                                <a href="/shop">Каталог</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="/home/stocks">Акции</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="/account">Личный кабинет</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="/about">Контакты</a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="/faq">Частые вопросы</i></a>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="/auth/login">Войти</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--offcanvas menu area end-->
<header>
    <div class="main_header">
        <div class="header_middle">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-md-3 col-4">
                        <div class="logo">
                            <a href="/home"><img src="/static/img/logo/logo-main.jpg" alt=""></a>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-6 col-6">
                        <div class="header_right_info">
                            <div class="search_container">
                                <form id="search-form">
                                    <div class="hover_category">
                                        <select class="select_option" name="select" id="search-category">
                                            <option selected value="0">Все категории</option>
                                            <option th:each="category:${categories}" th:value="${category.id}"
                                                    th:text="${category.name}"></option>
                                        </select>
                                    </div>
                                    <div class="search_box">
                                        <input placeholder="Поиск товара..." type="text" id="search-text">
                                        <button type="submit" id="search-button"><i class="icon-search"></i></button>
                                    </div>
                                </form>
                            </div>
                            <div class="header_account_area">
                                <div class="header_account-list top_links">
                                    <a href="/account"><i class="icon-users"></i></a>
                                </div>
                                <div class="header_account-list header_wishlist">
                                    <a href="/wishlist"><i class="icon-heart"></i><span class="item_count" style="display: none"></span></a>
                                </div>
                                <div class="header_account-list  mini_cart_wrapper">
                                    <a href="/cart"><i class="icon-shopping-bag"></i><span
                                            class="item_count" style="display: none;"></span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="header_bottom sticky-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-3">
                        <div class="categories_menu">
                            <div class="categories_title">
                                <h2 class="categori_toggle">Категории</h2>
                            </div>
                            <div class="categories_menu_toggle">
                                <ul>
                                    <!-- Итерируем по списку категорий -->
                                    <li class="menu_item_children" th:each="category : ${categories}">
                                        <a th:href="${'/shop?categoryId=' + category.id}" th:text="${category.name}"><i
                                                class="fa fa-angle-right"></i></a>
                                        <!-- Проверяем, есть ли у категории подкатегории -->
                                        <ul class="categories_mega_menu" th:if="${(category.subCategories.size() > 0)}">
                                            <!-- Итерируем по списку подкатегорий -->
                                            <ul>
                                                <li th:each="subCategory : ${category.subCategories}">
                                                    <a th:href="${'/shop?categoryId=' + subCategory.id}"
                                                       th:text="${subCategory.name}"></a>
                                                    <hr>
                                                </li>
                                            </ul>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <!--main menu start-->
                        <div class="main_menu menu_position">
                            <nav>
                                <ul>
                                    <li class="mega_items"><a href="/home">Главная</i></a>
                                    </li>
                                    <li class="mega_items"><a class="active" href="/shop">Каталог</i></a>
                                    </li>
                                    <li><a href="/home/stocks">Акции</i></a>
                                    </li>
                                    <li><a href="/about">Контакты</i></a>
                                    </li>
                                    <li><a href="/faq">Частые вопросы</i></a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                        <!--main menu end-->
                    </div>
                    <div class="col-lg-3">
                        <div class="call-support">
                            <p>Тех. поддержка: <a></a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
<!--header area end-->

<!--breadcrumbs area start-->
<div class="breadcrumbs_area">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumb_content">
                    <h3>Корзина</h3>
                    <ul>
                        <li><a href="/home">Главная</a></li>
                        <li>Корзина</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!--breadcrumbs area end-->

<!--shopping cart area start -->
<div class="shopping_cart_area mt-100">
    <div class="container">
        <div class="row">
            <h3 th:if="${cart.cartItems.size() == 0}">Корзина пуста</h3>
            <div class="col-12">
                <div class="table_desc" th:if="${cart.cartItems.size() > 0}">
                    <div>
                        <i class="fa fa-user"></i><span> - Акция только для зарегистрированных пользователей</span>
                    </div>
                    <div>
                        <i class="fa fa-check"></i><span> - Акция для каждого клиента</span>
                    </div>
                    <div>
                        <i class="fa fa-close"></i><span> - Акции нет</span>
                    </div>
                    <div class="cart_page table-responsive">
                        <table>
                            <thead>
                            <tr>
                                <th class="product_remove">Удалить</th>
                                <th class="product_remove">Акция</th>
                                <th class="product_thumb">Фото</th>
                                <th class="product_name">Название</th>
                                <th class="product-price">Цена</th>
                                <th class="product_quantity">Количество</th>
                                <th class="product_total">Сумма</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:if="${not(cart == null)}" th:each="cartItem: ${cart.cartItems}">
                                <td class="product_remove"><a href="javascript:void(0)" class="cart_remove"
                                                              th:attr="productId=${cartItem.product.id}, size=${cartItem.productVariation == null ? 0: cartItem.productVariation.size}"><i
                                        class="fa fa-trash-o"></i></a>
                                </td>
                                <td><a href="javascript:void(0)"><i class="fa"
                                                                    th:classappend="${cartItem.stockType == 0 ? 'fa-close' : ((cartItem.stockType == 1) ? 'fa-user' : 'fa-check')}"></i></a>
                                </td>
                                <td class="product_thumb"><a href="javascript:void(0)"><img
                                        th:src="'/products/' + ${cartItem.product.getPhotos().get(0)}" alt=""></a>
                                </td>
                                <td class="product_name">
                                    <a href="javascript:void(0)" th:text="${cartItem.product.name}"></a>
                                    <a href="javascript:void(0)"
                                       th:if="${cartItem.productVariation != null && cartItem.getProductVariation().size != 'Универсальный'}"
                                       th:text="${' ( ' + cartItem.productVariation.size} + ' ) '"></a>
                                </td>
                                <td class="product-price" th:text="${cartItem.product.price} + 'сом'"></td>
                                <td class="product_quantity"><label>Кол-во</label><input class="product_q" min="1"
                                                                                         max="100"
                                                                                         th:attr="productId=${cartItem.product.id}, productVariationId=${cartItem.productVariation != null ? cartItem.productVariation.id : 0}"
                                                                                         th:value="${cartItem.quantity}"
                                                                                         type="number"></td>
                                <td class="product_total" th:text="${cartItem.getTotalAmount()} + 'сом'"></td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="d-flex justify-content-center">
                            <div class="spinner" id="spinner"></div>
                        </div>
                        <div id="modal" class="modal">
                            <div class="modal-content">
                                <span class="close" id="closeModal">&times;</span>
                                <p id="modalMessage"></p>
                            </div>
                        </div>
                    </div>
                    <div class="cart_submit">
                        <button type="submit" id="update_cart">Обновить корзину</button>
                    </div>
                </div>
            </div>
        </div>
        <!--coupon code area start-->
        <div class="Checkout_section  mt-50" id="accordion" th:hidden="${cart.cartItems.size() == 0}">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h3>Оформление заказа</h3>
                        <div class="user-actions">
                            <h3>
                                <i class="fa fa-file-o" aria-hidden="true"></i>
                                У вас есть купон?
                                <a class="Returning" href="#" data-toggle="collapse" data-target="#checkout_coupon"
                                   aria-expanded="true">Нажмите здесь чтобы применить</a>

                            </h3>
                            <div id="checkout_coupon" class="collapse" data-parent="#accordion">
                                <div class="checkout_info coupon_info">
                                    <form id="couponForm">
                                        <input placeholder="Coupon code" name="couponCode" type="text">
                                        <button type="submit">Применить</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="checkout_form">
                    <div class="row">
                        <div class="col-lg-6 col-md-6">
                            <form id="orderForm">
                                <h3>Your order</h3>
                                <div class="order_table table-responsive">
                                    <table>
                                        <thead>
                                        <tr>
                                            <th>Товар</th>
                                            <th>Сумма</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="cartItem: ${cart.cartItems}">
                                            <td th:if="${cartItem.productVariation == null}"
                                                th:text="${cartItem.product.name} + ' × ' + ${cartItem.quantity}"></td>
                                            <td th:if="${cartItem.productVariation != null}"
                                                th:text="${cartItem.product.name} + ' ( ' + ${cartItem.productVariation.size} + ' ) ' + ' × ' + ${cartItem.quantity}"></td>
                                            <td th:text="${cartItem.getTotalAmount()} + ' сом'"></td>
                                        </tr>

                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <th>Сумма без скидок</th>
                                            <td id="cartSubtotal" th:text="${cart.cartAmount()} + ' сом'"></td>
                                        </tr>
                                        <tr>
                                            <th class="d-flex justify-content-center">
                                                <a id="remove-coupon">
                                                    <i class="fa fa-trash mr-2 mt-1"
                                                       th:hidden="${cart.coupon == null}"></i>
                                                </a>
                                                <p>Скидка по купону</p>
                                            </th>
                                            <td id="couponDiscount"
                                                th:text="${cart.coupon == null ? '0' : cart.coupon.discount} + ' %'"></td>
                                        </tr>
                                        <tr>
                                            <th>Доставка</th>
                                            <td id="shippingPrice"><strong>0 сом</strong></td>
                                        </tr>
                                        <tr class="order_total">
                                            <th>Итого (с учетом скидок)</th>
                                            <td id="orderTotal"><strong
                                                    th:text="${cart.cartAmountWithDiscount()} + ' сом'"></strong></td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </form>
                        </div>
                        <div class="col-lg-6 col-md-6">
                            <form id="orderDetails">
                                <h3>Детали заказа</h3>
                                <div class="row">
                                    <div class="col-lg-6 mb-20">
                                        <label>Имя<span>*</span></label>
                                        <input type="text" name="firstname" id="firstname" required>
                                    </div>
                                    <div class="col-lg-6 mb-20">
                                        <label>Фамилия<span>*</span></label>
                                        <input type="text" name="lastname" id="lastname" required>
                                    </div>
                                    <div class="col-lg-6 mb-20">
                                        <label>Номер телефона<span>*</span></label>
                                        <input type="text" name="phone_number" id="phone_number" required>
                                    </div>
                                    <div class="col-lg-6 mb-20">
                                        <label>Адрес электронной почты (e-mail) <span>*</span></label>
                                        <input type="email" name="email" id="email" required>
                                    </div>
                                </div>
                                <div class="col-12 mb-20">
                                    <input id="shipment" type="checkbox" data-toggle="collapse"
                                           data-target="#collapseOne"/>
                                    <label for="shipment" data-toggle="collapse" data-target="#collapseOne"
                                           aria-controls="collapseOne">Заказать доставку?</label>
                                    <a href="/checkout">/ Сброс</a>
                                    <div id="collapseOne" class="collapse one" data-parent="#accordion">
                                        <div class="card-body1">
                                            <div class="d-flex justify-content-center">
                                                <div class="spinner" id="spinner1"></div>
                                            </div>
                                            <div class="col-12 mb-20">
                                                <label for="state">Region <span>*</span></label>
                                                <select class="form-select form-select-sm" name="state" id="state">
                                                    <option value=""></option>
                                                    <option th:each="state: ${states}" th:value="${state}"
                                                            th:text="${state}"></option>
                                                </select>
                                            </div>
                                            <div class="col-12 mb-20">
                                                <label for="town">City <span>*</span></label>
                                                <select class="form-select form-select-sm" name="town" id="town">
                                                    <option value=""></option>
                                                    <option th:each="town:${towns}" th:value="${town}"
                                                            th:text="${town}"></option>
                                                </select>
                                            </div>
                                            <div class="col-12 mb-20">
                                                <label>Street address<span>*</span></label>
                                                <input placeholder="House number and street name" type="text">
                                            </div>
                                            <div class="order_button">
                                                <button type="button" id="scost">Посчитать</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="order_button">
                                    <button type="submit" id="order">Заказать</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--shopping cart area end -->

<!--footer area start-->
<footer class="footer_widgets">
    <div class="footer_top">
        <div class="container">
            <div class="row">
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="widgets_container contact_us">
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="widgets_container widget_menu">
                        <h3>Информация</h3>
                        <div class="footer_menu">
                            <ul>
                                <li><a href="/about">Контакты</a></li>
                                <li><a href="/shop">Каталог</a></li>
                                <li><a href="/faq">Частые вопросы</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-5">
                    <div class="widgets_container widget_app">
                        <div class="footer_logo">
                            <a href="/home"><img src="/static/img/logo/logo1.png" alt=""></a>
                        </div>
                        <div>
                            <div class="justify-content-center d-flex mt-3">
                                <p class="copyright-text">&copy; 2023 <a href="/home">ProffShop</a>
                            </div>
                        </div>
                        <div>
                            <div class="widgets_container contact_us d-flex justify-content-center">
                                <p></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-sm-6">
                    <div class="widgets_container widget_menu">
                        <h3>Мой аккаунт</h3>
                        <div class="footer_menu">
                            <ul>
                                <li><a href="/account">Личный кабинет</a></li>
                                <li><a href="/cart">Корзина</a></li>
                                <li><a href="/wishlist">Избранное</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!--footer area end-->

<!-- JS
============================================ -->
<!--jquery min js-->
<script src="/static/js/vendor/jquery-3.4.1.min.js"></script>
<!--popper min js-->
<script src="/static/js/popper.js"></script>
<!--bootstrap min js-->
<script src="/static/js/jquery/bootstrap.min.js"></script>
<!--owl carousel min js-->
<script src="/static/js/owl.carousel.min.js"></script>
<!--slick min js-->
<script src="/static/js/slick.min.js"></script>
<!--magnific popup min js-->
<script src="/static/js/jquery/jquery.magnific-popup.min.js"></script>
<!--counterup min js-->
<script src="/static/js/jquery/jquery.counterup.min.js"></script>
<!--jquery countdown min js-->
<script src="/static/js/jquery/jquery.countdown.js"></script>
<!--jquery ui min js-->
<script src="/static/js/jquery/jquery.ui.js"></script>
<!--jquery elevatezoom min js-->
<script src="/static/js/jquery/jquery.elevatezoom.js"></script>
<!--isotope packaged min js-->
<script src="/static/js/jquery/isotope.pkgd.min.js"></script>
<!--slinky menu js-->
<script src="/static/js/slinky.menu.js"></script>
<!-- Plugins JS -->
<script src="/static/js/jquery/plugins.js"></script>
<script src="/static/js/cart/cartpage.js"></script>
<script src="/static/js/cart/applyCoupon.js"></script>
<script src="/static/js/checkout.js"></script>
<script src="/static/js/general/generalInfo.js"></script>
<script src="/static/js/searchProduct.js"></script>
<!-- Main JS -->
<script src="/static/js/main.js"></script>


</body>

</html>
